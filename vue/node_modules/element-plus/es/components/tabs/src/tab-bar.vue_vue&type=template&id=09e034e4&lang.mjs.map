{"version":3,"file":"tab-bar.vue_vue&type=template&id=09e034e4&lang.mjs","sources":["../../../../../../packages/components/tabs/src/tab-bar.vue?vue&type=template&id=09e034e4&lang.js"],"sourcesContent":["<template>\n  <div\n    v-resize=\"update\"\n    :class=\"['el-tabs__active-bar', `is-${rootTabs.props.tabPosition}`]\"\n    :style=\"barStyle\"\n  ></div>\n</template>\n<script lang=\"ts\">\nimport {\n  defineComponent,\n  inject,\n  getCurrentInstance,\n  watch,\n  nextTick,\n  ref,\n} from 'vue'\nimport { capitalize } from '@vue/shared'\nimport { Resize } from '@element-plus/directives'\nimport type { Pane, RootTabs } from './token'\n\nimport type { CSSProperties, PropType } from 'vue'\n\nexport default defineComponent({\n  name: 'ElTabBar',\n  directives: {\n    Resize,\n  },\n  props: {\n    tabs: {\n      type: Array as PropType<Pane[]>,\n      default: () => [] as Pane[],\n    },\n  },\n  setup(props) {\n    const rootTabs = inject<RootTabs>('rootTabs')\n    if (!rootTabs) {\n      throw new Error(`ElTabBar must use with ElTabs`)\n    }\n    const instance = getCurrentInstance()\n\n    const getBarStyle = () => {\n      const style = {} as CSSProperties\n      let offset = 0\n      let tabSize = 0\n\n      const sizeName = ['top', 'bottom'].includes(rootTabs.props.tabPosition)\n        ? 'width'\n        : 'height'\n      const sizeDir = sizeName === 'width' ? 'x' : 'y'\n\n      props.tabs.every((tab) => {\n        const $el = instance.parent.refs?.[`tab-${tab.paneName}`] as Element\n        if (!$el) {\n          return false\n        }\n        if (!tab.active) {\n          return true\n        } else {\n          tabSize = $el[`client${capitalize(sizeName)}`]\n          const position = sizeDir === 'x' ? 'left' : 'top'\n          offset =\n            $el.getBoundingClientRect()[position] -\n            $el.parentElement.getBoundingClientRect()[position]\n          const tabStyles = window.getComputedStyle($el)\n\n          if (sizeName === 'width') {\n            if (props.tabs.length > 1) {\n              tabSize -=\n                parseFloat(tabStyles.paddingLeft) +\n                parseFloat(tabStyles.paddingRight)\n            }\n            offset += parseFloat(tabStyles.paddingLeft)\n          }\n          return false\n        }\n      })\n\n      const transform = `translate${capitalize(sizeDir)}(${offset}px)`\n      style[sizeName] = `${tabSize}px`\n      style.transform = transform\n      style.msTransform = transform\n      ;(style as any).webkitTransform = transform\n\n      return style\n    }\n\n    const barStyle = ref(getBarStyle() as CSSProperties)\n\n    const update = () => {\n      barStyle.value = getBarStyle()\n    }\n\n    watch(\n      () => props.tabs,\n      () => {\n        nextTick(() => {\n          update()\n        })\n      }\n    )\n\n    return {\n      rootTabs,\n      barStyle,\n      update,\n    }\n  },\n})\n</script>\n"],"names":["_createElementBlock"],"mappings":";;;;sCACEA;IAEG,oDAAqC,cAAS,MAAM;AAAA,IACpD,sBAAO;;wBAFE;;;;;;"}
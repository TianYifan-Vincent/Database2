{"version":3,"file":"index.vue_vue&type=script&lang.js","sources":["../../../../../../packages/components/scrollbar/src/index.vue"],"sourcesContent":["<template>\n  <div ref=\"scrollbar\" class=\"el-scrollbar\">\n    <div\n      ref=\"wrap\"\n      :class=\"[\n        wrapClass,\n        'el-scrollbar__wrap',\n        native ? '' : 'el-scrollbar__wrap--hidden-default',\n      ]\"\n      :style=\"style\"\n      @scroll=\"handleScroll\"\n    >\n      <component\n        :is=\"tag\"\n        ref=\"resize\"\n        :class=\"['el-scrollbar__view', viewClass]\"\n        :style=\"viewStyle\"\n      >\n        <slot />\n      </component>\n    </div>\n    <template v-if=\"!native\">\n      <bar :move=\"moveX\" :ratio=\"ratioX\" :size=\"sizeWidth\" :always=\"always\" />\n      <bar\n        :move=\"moveY\"\n        :ratio=\"ratioY\"\n        :size=\"sizeHeight\"\n        vertical\n        :always=\"always\"\n      />\n    </template>\n  </div>\n</template>\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  provide,\n  ref,\n} from 'vue'\nimport {\n  addResizeListener,\n  removeResizeListener,\n} from '@element-plus/utils/resize-event'\nimport {\n  addUnit,\n  isArray,\n  isNumber,\n  isString,\n  toObject,\n} from '@element-plus/utils/util'\nimport { debugWarn } from '@element-plus/utils/error'\nimport Bar from './bar.vue'\n\nimport type { CSSProperties, PropType } from 'vue'\n\nexport default defineComponent({\n  name: 'ElScrollbar',\n  components: { Bar },\n  props: {\n    height: {\n      type: [String, Number],\n      default: '',\n    },\n    maxHeight: {\n      type: [String, Number],\n      default: '',\n    },\n    native: {\n      type: Boolean,\n      default: false,\n    },\n    wrapStyle: {\n      type: [String, Array] as PropType<string | CSSProperties[]>,\n      default: '',\n    },\n    wrapClass: {\n      type: [String, Array],\n      default: '',\n    },\n    viewClass: {\n      type: [String, Array],\n      default: '',\n    },\n    viewStyle: {\n      type: [String, Array],\n      default: '',\n    },\n    noresize: Boolean, // 如果 container 尺寸不会发生变化，最好设置它可以优化性能\n    tag: {\n      type: String,\n      default: 'div',\n    },\n    always: {\n      type: Boolean,\n      default: false,\n    },\n    minSize: {\n      type: Number,\n      default: 20,\n    },\n  },\n  emits: ['scroll'],\n  setup(props, { emit }) {\n    const sizeWidth = ref('0')\n    const sizeHeight = ref('0')\n    const moveX = ref(0)\n    const moveY = ref(0)\n    const scrollbar = ref(null)\n    const wrap = ref(null)\n    const resize = ref(null)\n    const ratioY = ref(1)\n    const ratioX = ref(1)\n    const SCOPE = 'ElScrollbar'\n    const GAP = 4 // top 2 + bottom 2 of bar instance\n\n    provide('scrollbar', scrollbar)\n    provide('scrollbar-wrap', wrap)\n\n    const handleScroll = () => {\n      if (wrap.value) {\n        const offsetHeight = wrap.value.offsetHeight - GAP\n        const offsetWidth = wrap.value.offsetWidth - GAP\n\n        moveY.value =\n          ((wrap.value.scrollTop * 100) / offsetHeight) * ratioY.value\n        moveX.value =\n          ((wrap.value.scrollLeft * 100) / offsetWidth) * ratioX.value\n\n        emit('scroll', {\n          scrollTop: wrap.value.scrollTop,\n          scrollLeft: wrap.value.scrollLeft,\n        })\n      }\n    }\n\n    const setScrollTop = (value: number) => {\n      if (!isNumber(value)) {\n        debugWarn(SCOPE, 'value must be a number')\n        return\n      }\n      wrap.value.scrollTop = value\n    }\n\n    const setScrollLeft = (value: number) => {\n      if (!isNumber(value)) {\n        debugWarn(SCOPE, 'value must be a number')\n        return\n      }\n      wrap.value.scrollLeft = value\n    }\n\n    const update = () => {\n      if (!wrap.value) return\n\n      const offsetHeight = wrap.value.offsetHeight - GAP\n      const offsetWidth = wrap.value.offsetWidth - GAP\n\n      const originalHeight = offsetHeight ** 2 / wrap.value.scrollHeight\n      const originalWidth = offsetWidth ** 2 / wrap.value.scrollWidth\n      const height = Math.max(originalHeight, props.minSize)\n      const width = Math.max(originalWidth, props.minSize)\n\n      ratioY.value =\n        originalHeight /\n        (offsetHeight - originalHeight) /\n        (height / (offsetHeight - height))\n      ratioX.value =\n        originalWidth /\n        (offsetWidth - originalWidth) /\n        (width / (offsetWidth - width))\n\n      sizeHeight.value = height + GAP < offsetHeight ? `${height}px` : ''\n      sizeWidth.value = width + GAP < offsetWidth ? `${width}px` : ''\n    }\n\n    const style = computed(() => {\n      let style = props.wrapStyle as CSSProperties\n      if (isArray(style)) {\n        style = toObject(style)\n        style.height = addUnit(props.height)\n        style.maxHeight = addUnit(props.maxHeight)\n      } else if (isString(style)) {\n        style += addUnit(props.height)\n          ? `height: ${addUnit(props.height)};`\n          : ''\n        style += addUnit(props.maxHeight)\n          ? `max-height: ${addUnit(props.maxHeight)};`\n          : ''\n      }\n      return style\n    })\n\n    onMounted(() => {\n      if (!props.native) {\n        nextTick(update)\n      }\n      if (!props.noresize) {\n        addResizeListener(resize.value, update)\n        addEventListener('resize', update)\n      }\n    })\n\n    onBeforeUnmount(() => {\n      if (!props.noresize) {\n        removeResizeListener(resize.value, update)\n        removeEventListener('resize', update)\n      }\n    })\n\n    return {\n      moveX,\n      moveY,\n      ratioX,\n      ratioY,\n      sizeWidth,\n      sizeHeight,\n      style,\n      scrollbar,\n      wrap,\n      resize,\n      update,\n      handleScroll,\n      setScrollTop,\n      setScrollLeft,\n    }\n  },\n})\n</script>\n"],"names":["defineComponent","Bar","ref","isNumber","computed","isArray","toObject","addUnit","isString"],"mappings":"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"}